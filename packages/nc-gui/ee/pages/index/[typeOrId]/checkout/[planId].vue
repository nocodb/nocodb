<script lang="ts" setup>
const { activeSubscription } = useProvidePaymentStore()

const { hideSidebar, showTopbar } = storeToRefs(useSidebarStore())

const { appInfo } = useGlobal()

onMounted(() => {
  hideSidebar.value = true
  showTopbar.value = true

  if (!appInfo.value.stripePublishableKey) {
    message.error('Stripe publishable key not found')
  }
})

onBeforeUnmount(() => {
  hideSidebar.value = false
  showTopbar.value = false
})
</script>

<template>
  <div class="flex items-center justify-center w-full pt-5">
    <PaymentCheckout v-if="!activeSubscription" />
    <PaymentCheckoutChange v-else />
  </div>
</template>
