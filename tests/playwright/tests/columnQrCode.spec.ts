import { test } from '@playwright/test';
import { DashboardPage } from '../pages/Dashboard';
import setup from '../setup';
import { GridPage } from '../pages/Dashboard/Grid';

type ExpectedQrCodeData = {
  referencedValue: string;
  base64EncodedSrc: string;
};

test.describe('Virtual Columns', () => {
  let dashboard: DashboardPage;
  let grid: GridPage;
  let context: any;

  test.beforeEach(async ({ page }) => {
    context = await setup({ page });
    dashboard = new DashboardPage(page, context.project);
    grid = dashboard.grid;
  });

  test.describe('QrCode Column', () => {
    async function qrCodeColumnVerify(qrColumnTitle: string, expectedQrCodeData: ExpectedQrCodeData[]) {
      for (let i = 0; i < expectedQrCodeData.length; i++) {
        await grid.cell.verifyQrCodeCell({
          index: i,
          columnHeader: qrColumnTitle,
          expectedSrcValue: expectedQrCodeData[i].base64EncodedSrc,
        });
      }
    }
    test('creation, showing, updating value and change qr column title and reference column', async () => {
      // Add qr code column referencing the City column
      // and compare the base64 encoded codes/src attributes for the first 3 rows.
      // Column data from City table (Sakila DB)
      /**
       * City                   LastUpdate              Address List                Country
       * A Corua (La Corua)     2006-02-15 04:45:25     939 Probolinggo Loop        Spain
       * Abha                   2006-02-15 04:45:25     733 Mandaluyong Place       Saudi Arabia
       * Abu Dhabi              2006-02-15 04:45:25     535 Ahmadnagar Manor        United Arab Emirates
       */
      const expectedQrCodeCellValues: ExpectedQrCodeData[] = [
        {
          referencedValue: 'A Corua (La Corua)',
          base64EncodedSrc:
            'data:image/png;base64,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',
          // 'data:image/png;base64,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',
        },
        {
          referencedValue: 'Abha',
          base64EncodedSrc:
            // 'data:image/png;base64,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',
            'data:image/png;base64,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',
        },
        {
          referencedValue: 'Abu Dhabi',
          base64EncodedSrc:
            // 'data:image/png;base64,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',
            'data:image/png;base64,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',
        },
      ];

      // close 'Team & Auth' tab
      await dashboard.closeTab({ title: 'Team & Auth' });

      await dashboard.treeView.openTable({ title: 'City' });

      await grid.column.create({
        title: 'QrCode1',
        type: 'QrCode',
        qrCodeValueColumnTitle: 'City',
      });

      await qrCodeColumnVerify('QrCode1', expectedQrCodeCellValues);

      // Clicking on qr code in first row and expect it shows a
      // popup with an enlarged version of the qr code
      await grid.cell.get({ columnHeader: 'QrCode1', index: 0 }).click();
      const qrGridOverlay = grid.qrCodeOverlay;
      await qrGridOverlay.verifyQrValueLabel(expectedQrCodeCellValues[0].referencedValue);
      await qrGridOverlay.clickCloseButton();

      // Change the value in the referenced column, first row
      // and expect respective QR changes accordingly
      await grid.cell.fillText({ columnHeader: 'City', index: 0, text: 'Hamburg' });
      const expectedQrCodeCellValuesAfterCityNameChange = [
        {
          referencedValue: 'Hamburg',
          base64EncodedSrc:
            'data:image/png;base64,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',
        },
        ...expectedQrCodeCellValues.slice(1),
      ];
      await qrCodeColumnVerify('QrCode1', expectedQrCodeCellValuesAfterCityNameChange);

      // Change the QR Code column title
      await grid.column.openEdit({ title: 'QrCode1' });
      await grid.column.fillTitle({ title: 'QrCode1 Renamed' });
      await grid.column.save({ isUpdated: true });
      await qrCodeColumnVerify('QrCode1 Renamed', expectedQrCodeCellValuesAfterCityNameChange);

      // Change the referenced column title
      await grid.column.openEdit({ title: 'City' });
      await grid.column.fillTitle({ title: 'City Renamed' });
      await grid.column.save({ isUpdated: true });
      await qrCodeColumnVerify('QrCode1 Renamed', expectedQrCodeCellValuesAfterCityNameChange);

      // Change to another referenced column
      await grid.column.create({ title: 'New City Column' });
      await grid.cell.fillText({ columnHeader: 'New City Column', index: 0, text: 'Hamburg' });
      await grid.column.openEdit({ title: 'QrCode1 Renamed' });
      await grid.column.changeReferencedColumnForQrCode({ titleOfReferencedColumn: 'New City Column' });

      await qrCodeColumnVerify('QrCode1 Renamed', [
        {
          referencedValue: 'Hamburg',
          base64EncodedSrc:
            'data:image/png;base64,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',
        },
      ]);

      await dashboard.closeTab({ title: 'City' });
    });

    test('deletion of the QR column: directly and indirectly when the reference value column is deleted', async () => {
      // close 'Team & Auth' tab
      await dashboard.closeTab({ title: 'Team & Auth' });

      await dashboard.treeView.openTable({ title: 'City' });

      await grid.column.create({ title: 'column_name_a' });
      await grid.column.verify({ title: 'column_name_a' });
      await grid.column.create({
        title: 'QrCode2',
        type: 'QrCode',
        qrCodeValueColumnTitle: 'column_name_a',
      });
      await grid.column.verify({ title: 'QrCode2', isVisible: true });
      await grid.column.delete({ title: 'QrCode2' });
      await grid.column.verify({ title: 'QrCode2', isVisible: false });

      await grid.column.create({
        title: 'QrCode2',
        type: 'QrCode',
        qrCodeValueColumnTitle: 'column_name_a',
      });
      await grid.column.verify({ title: 'QrCode2', isVisible: true });
      await grid.column.delete({ title: 'column_name_a' });
      await grid.column.verify({ title: 'QrCode2', isVisible: false });

      await dashboard.closeTab({ title: 'City' });
    });
  });
});
